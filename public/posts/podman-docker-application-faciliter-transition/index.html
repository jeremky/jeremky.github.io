<!DOCTYPE html>
<html lang="fr">
  <head>
    
      <title>
        podman-docker : une application pour faciliter la transition ::
        JeremKy.fr
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="Comme évoqué dans un précédent article, j&rsquo;ai pris la décision de migrer de Docker vers Podman pour la gestion de mes conteneurs.
Pour rappel, Podman a l&rsquo;avantage de pouvoir fonctionner sans daemon central, ce qui améliore la sécurité du système. Cependant, même si un effort énorme est fourni pour faciliter la transition d&rsquo;un service à l&rsquo;autre, il subsiste plusieurs inconvénients, notamment dans l’utilisation de podman-compose avec certains paramètres.
La version fournie dans les paquets Debian est assez ancienne. Et même s&rsquo;il est possible de passer sur une version plus récente avec les backports de Debian, il restait quelques éléments qui posaient problème.
"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://www.jeremky.fr/posts/podman-docker-application-faciliter-transition/" />







<link rel="stylesheet" href="/css/style.css" />

<link rel="stylesheet" href="https://www.jeremky.fr/style.css" />


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.jeremky.fr/img/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="https://www.jeremky.fr/img/favicon.png" />


<link href="/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="podman-docker : une application pour faciliter la transition">
  <meta name="twitter:description" content="Comme évoqué dans un précédent article, j’ai pris la décision de migrer de Docker vers Podman pour la gestion de mes conteneurs.
Pour rappel, Podman a l’avantage de pouvoir fonctionner sans daemon central, ce qui améliore la sécurité du système. Cependant, même si un effort énorme est fourni pour faciliter la transition d’un service à l’autre, il subsiste plusieurs inconvénients, notamment dans l’utilisation de podman-compose avec certains paramètres.
La version fournie dans les paquets Debian est assez ancienne. Et même s’il est possible de passer sur une version plus récente avec les backports de Debian, il restait quelques éléments qui posaient problème.">



<meta property="og:url" content="https://www.jeremky.fr/posts/podman-docker-application-faciliter-transition/">
  <meta property="og:site_name" content="JeremKy.fr">
  <meta property="og:title" content="podman-docker : une application pour faciliter la transition">
  <meta property="og:description" content="Comme évoqué dans un précédent article, j’ai pris la décision de migrer de Docker vers Podman pour la gestion de mes conteneurs.
Pour rappel, Podman a l’avantage de pouvoir fonctionner sans daemon central, ce qui améliore la sécurité du système. Cependant, même si un effort énorme est fourni pour faciliter la transition d’un service à l’autre, il subsiste plusieurs inconvénients, notamment dans l’utilisation de podman-compose avec certains paramètres.
La version fournie dans les paquets Debian est assez ancienne. Et même s’il est possible de passer sur une version plus récente avec les backports de Debian, il restait quelques éléments qui posaient problème.">
  <meta property="og:locale" content="fr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-19T18:24:37+00:00">
    <meta property="article:modified_time" content="2025-01-19T18:24:37+00:00">
    <meta property="article:tag" content="Docker">
    <meta property="article:tag" content="Podman">






  </head>
  <body >
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/apropos">A propos</a></li>
        
      
        
          <li><a href="/archives">Archives</a></li>
        
      
        
          <li><a href="/categories/news">News</a></li>
        
      
        
          <li><a href="/categories/tutos">Tutos</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/apropos">A propos</a></li>
      
    
      
        <li><a href="/archives">Archives</a></li>
      
    
      
        <li><a href="/categories/news">News</a></li>
      
    
      
        <li><a href="/categories/tutos">Tutos</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <article class="post">
    <h1 class="post-title">podman-docker : une application pour faciliter la transition</h1>
    <div class="post-meta">
      
        <time class="post-date">
          19/01/2025
        </time>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 4 min de lecture</span
        >
      
    </div>

    
      <span class="post-tags">
        
          <a href="https://www.jeremky.fr/tags/docker/">#docker</a>&nbsp;
        
          <a href="https://www.jeremky.fr/tags/podman/">#podman</a>&nbsp;
        
      </span>
    

    
      <figure class="post-cover">
  
    <img src="https://www.jeremky.fr/img/posts/podman-docker-application-faciliter-transition/cover.webp" alt="podman-docker : une application pour faciliter la transition" width="700" />
  

  
</figure>

    

    <div class="post-content">
      
        
        <h2>Sommaire</h2>
        <aside class="table-of-contents"><nav id="TableOfContents">
  <ul>
    <li><a href="#installation">Installation</a></li>
    <li><a href="#utilisation">Utilisation</a>
      <ul>
        <li><a href="#jdockersh">jdocker.sh</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></aside>
        
      
      <p>Comme évoqué dans un <a href="https://www.jeremky.fr/posts/migration-de-docker-vers-podman/">précédent article</a>, j&rsquo;ai pris la décision de migrer de Docker vers Podman pour la gestion de mes conteneurs.</p>
<p>Pour rappel, Podman a l&rsquo;avantage de pouvoir fonctionner sans daemon central, ce qui améliore la sécurité du système. Cependant, même si un effort énorme est fourni pour faciliter la transition d&rsquo;un service à l&rsquo;autre, il subsiste <a href="/posts/reecriture-des-articles-docker/">plusieurs inconvénients</a>, notamment dans l’utilisation de <code>podman-compose</code> avec certains paramètres.</p>
<p>La version fournie dans les paquets Debian est assez ancienne. Et même s&rsquo;il est possible de passer sur une version plus récente avec les backports de Debian, il restait quelques éléments qui posaient problème.</p>
<p>Certaines applications ne gèrent pas correctement Podman. C&rsquo;est le cas de <a href="https://github.com/jesseduffield/lazydocker">lazydocker</a> par exemple, qui ne trouve pas le socket, à moins de recréer un lien symbolique à chaque redémarrage du serveur.</p>
<p>Mais je me suis rendu compte récemment que j&rsquo;étais passé à côté d&rsquo;une application permettant de régler ces différents problèmes : <code>podman-docker</code>.</p>
<p>Disponible sur la plupart des distributions, ce package permet d&rsquo;utiliser les commandes <code>docker</code> et <code>docker-compose</code> avec Podman. Il s&rsquo;occupe également de créer les liens symboliques vers les différents fichiers de Podman.</p>
<p>Autrement dit, vous ne ferez aucune différence entre l&rsquo;utilisation de Docker et de Podman.</p>
<h2 id="installation">
  Installation
  <a href="#installation" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Avant de procéder à l&rsquo;installation de l&rsquo;application, je vous recommande de désinstaller <code>podman-compose</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt remove podman-compose
</span></span></code></pre></div><p>On peut ensuite passer à l&rsquo;installation de podman-docker :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt install podman-docker
</span></span></code></pre></div><p>Lorsque vous utiliserez les commandes de Docker, un message apparaîtra vous indiquant que c&rsquo;est une émulation des commandes vers Podman. Si vous voulez supprimer le message, créez le fichier comme spécifié :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo touch /etc/containers/nodocker
</span></span></code></pre></div><h2 id="utilisation">
  Utilisation
  <a href="#utilisation" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>A l&rsquo;utilisation de <code>docker-compose</code>, tout est transparent. Il est quand même préférable de redéployer vos conteneurs après avoir changé d&rsquo;application afin de redéfinir les bons labels. Mais je n&rsquo;ai constaté aucun problème de communication entre <code>docker-compose</code> et <code>podman</code>.</p>
<p>Les fichiers <code>compose.yml</code> présentés sur ce site sont donc 100% compatibles avec les 2 solutions sans la moindre modification à effectuer (même au niveau du socket).</p>
<h3 id="jdockersh">
  jdocker.sh
  <a href="#jdockersh" class="h-anchor" aria-hidden="true">#</a>
</h3>
<p>Le script que je propose sur ce site pour faciliter l&rsquo;utilisation de Docker a été revu en ce sens. Désormais, au 1er lancement, s&rsquo;il ne trouve ni Docker, ni Podman, il va procéder à l&rsquo;installation de Podman avec <code>podman-docker</code> (et donc <code>docker-compose</code>).</p>
<p>A noter que j&rsquo;en ai profité pour apporter pas mal d&rsquo;améliorations au script :</p>
<ul>
<li>
<p>Mise en place de l&rsquo;autocomplétion : les commandes de base ainsi que le nom des conteneurs vous sont proposés en utilisant la touche <code>TAB</code></p>
</li>
<li>
<p>Mise en place des droits sudo en <code>NOPASSWD</code> : vous pouvez utiliser <code>docker</code>, <code>podman</code> et le script <code>jdocker.sh</code> sans avoir à saisir votre mot de passe. <code>lazydocker</code> a également été ajouté.</p>
</li>
<li>
<p>Le script vérifiera quand même quelle solution est installée et s&rsquo;adaptera en conséquence. Cela le rend donc compatible avec Docker et Podman présents sur les dépôts Debian / Ubuntu, mais également avec la version Docker CE (qui dispose de la commande <code>compose</code> intégrée).</p>
</li>
</ul>
<p>Le script est récupérable <a href="https://github.com/jeremky/jdocker">sur github</a>. Si vous disposez de la commande <code>git</code>, vous pouvez le récupérer directement via la commande suivante :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/jeremky/jdocker.git
</span></span></code></pre></div><h2 id="conclusion">
  Conclusion
  <a href="#conclusion" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Il arrivait souvent de rencontrer certains bugs avec l&rsquo;utilisation de <code>podman-compose</code>. Le mode <code>host</code> n&rsquo;était par exemple pas compatible avec la version présente sur les dépôts Debian. Et même si celle des backports corrigeait le problème, cela nécessitait des étapes supplémentaires avant de pouvoir utiliser correctement Podman.</p>
<p><code>podman-docker</code> permet donc de profiter du meilleur des 2 applications : un gestionnaire de conteneurs plus sécurisé avec un gestionnaire de fichiers <code>compose</code> plus abouti. Ubuntu dispose toujours de ce paquet dans ses dépôts, cela assure donc qu&rsquo;il sera toujours présent dans Debian 13.</p>
<p>A l&rsquo;avenir, il est possible que je réadapte <code>jdocker.sh</code> si jamais les choses avancent chez Podman. Mais pour le moment, je pense que cette combinaison est la meilleure solution.</p>
<p>Si vous avez des questions à ce sujet, vous pouvez toujours me contacter par <a href="mailto:contact@jeremky.fr">e-mail</a>.</p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Autres posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="https://www.jeremky.fr/posts/tmux-multiplexeur-de-terminaux/">
                  <span class="button__icon">←</span>
                  <span class="button__text">tmux : multiplexeur de terminaux</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="https://www.jeremky.fr/posts/edito-au-revoir-minecraft/">
                  <span class="button__text">Édito : Au revoir Minecraft</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </article>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
          <div class="copyright">
        <span>© 2025 Propulsé par <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span>
      </div>
    
  </div>
</footer>





<script type="text/javascript" src="/bundle.min.js"></script>


      
    </div>

    
  </body>
</html>
