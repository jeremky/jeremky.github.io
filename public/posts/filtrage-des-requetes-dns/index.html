<!DOCTYPE html>
<html lang="fr">
  <head>
    
      <title>
        Filtrage des requêtes DNS ::
        JeremKy.fr
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="Utiliser un Adblock directement dans son navigateur rend la navigation plus agréable&hellip; Mais on peut aller encore plus loin : bloquer les publicités directement au niveau des requêtes DNS, non seulement dans le navigateur, mais également sur tout le système d&rsquo;exploitation. Il existe plusieurs solutions pour faire cela, mais je vais en présenter deux : Adguard et NextDNS.
Adguard DNS et Adguard Home # Adguard existe sous la forme d&rsquo;un bloqueur de pubs traditionnel, mais propose également des solutions de blocage DNS.
"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://www.jeremky.fr/posts/filtrage-des-requetes-dns/" />







<link rel="stylesheet" href="/css/style.css" />

<link rel="stylesheet" href="https://www.jeremky.fr/style.css" />


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.jeremky.fr/img/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="https://www.jeremky.fr/img/favicon.png" />


<link href="/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Filtrage des requêtes DNS">
  <meta name="twitter:description" content="Utiliser un Adblock directement dans son navigateur rend la navigation plus agréable… Mais on peut aller encore plus loin : bloquer les publicités directement au niveau des requêtes DNS, non seulement dans le navigateur, mais également sur tout le système d’exploitation. Il existe plusieurs solutions pour faire cela, mais je vais en présenter deux : Adguard et NextDNS.
Adguard DNS et Adguard Home # Adguard existe sous la forme d’un bloqueur de pubs traditionnel, mais propose également des solutions de blocage DNS.">



<meta property="og:url" content="https://www.jeremky.fr/posts/filtrage-des-requetes-dns/">
  <meta property="og:site_name" content="JeremKy.fr">
  <meta property="og:title" content="Filtrage des requêtes DNS">
  <meta property="og:description" content="Utiliser un Adblock directement dans son navigateur rend la navigation plus agréable… Mais on peut aller encore plus loin : bloquer les publicités directement au niveau des requêtes DNS, non seulement dans le navigateur, mais également sur tout le système d’exploitation. Il existe plusieurs solutions pour faire cela, mais je vais en présenter deux : Adguard et NextDNS.
Adguard DNS et Adguard Home # Adguard existe sous la forme d’un bloqueur de pubs traditionnel, mais propose également des solutions de blocage DNS.">
  <meta property="og:locale" content="fr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-30T17:10:13+00:00">
    <meta property="article:modified_time" content="2023-12-30T17:10:13+00:00">
    <meta property="article:tag" content="Reseau">






  </head>
  <body >
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/apropos">A propos</a></li>
        
      
        
          <li><a href="/archives">Archives</a></li>
        
      
        
          <li><a href="/categories/news">News</a></li>
        
      
        
          <li><a href="/categories/tutos">Tutos</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/apropos">A propos</a></li>
      
    
      
        <li><a href="/archives">Archives</a></li>
      
    
      
        <li><a href="/categories/news">News</a></li>
      
    
      
        <li><a href="/categories/tutos">Tutos</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <article class="post">
    <h1 class="post-title">Filtrage des requêtes DNS</h1>
    <div class="post-meta">
      
        <time class="post-date">
          30/12/2023
        </time>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 3 min de lecture</span
        >
      
    </div>

    
      <span class="post-tags">
        
          <a href="https://www.jeremky.fr/tags/reseau/">#reseau</a>&nbsp;
        
      </span>
    

    
      <figure class="post-cover">
  
    <img src="https://www.jeremky.fr/img/posts/filtrage-des-requetes-dns/cover.webp" alt="Filtrage des requêtes DNS" width="700" />
  

  
</figure>

    

    <div class="post-content">
      
        
        <h2>Sommaire</h2>
        <aside class="table-of-contents"><nav id="TableOfContents">
  <ul>
    <li><a href="#adguard-dns-et-adguard-home">Adguard DNS et Adguard Home</a></li>
    <li><a href="#nextdns">NextDNS</a></li>
  </ul>
</nav></aside>
        
      
      <p>Utiliser un Adblock directement dans son navigateur rend la navigation plus agréable&hellip; Mais on peut aller encore plus loin : bloquer les publicités directement au niveau des requêtes DNS, non seulement dans le navigateur, mais également sur tout le système d&rsquo;exploitation. Il existe plusieurs solutions pour faire cela, mais je vais en présenter deux : Adguard et NextDNS.</p>
<h2 id="adguard-dns-et-adguard-home">
  Adguard DNS et Adguard Home
  <a href="#adguard-dns-et-adguard-home" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p><a href="https://adguard.com/fr/welcome.html">Adguard</a> existe sous la forme d&rsquo;un bloqueur de pubs traditionnel, mais propose également des solutions de blocage DNS.</p>
<p>La première, Adguard DNS, est la plus simple à mettre en place, puisque l&rsquo;on peut utiliser des serveurs DNS que Adguard nous met à disposition. Vous trouverez sur <a href="https://adguard-dns.io/fr/public-dns.html">cette page</a>, les IP v4 et v6 de leurs serveurs. Ils proposent plusieurs possibilités de filtrage : classique, non filtrant, et avec une protection dite familiale.</p>

  <img src="/img/posts/filtrage-des-requetes-dns/adguard.webp"  class="center"  style="border-radius: 8px;"  />


<p>Le blocage fonctionne plutôt bien dans leur configuration. J&rsquo;ai toutefois constaté quelques baisses de performance comparé à d&rsquo;autre fournisseurs DNS, et cette configuration est limitée sur les appareils où vous pouvez manuellement changer les adresses IP DNS.</p>
<p>Pour contourner ces problèmes, il y a une autre solution : Adguard Home</p>
<p>Ce logiciel vous permettra de mettre en place chez vous une solution de blocage des pubs pour tout votre réseau local. Il fourni également un serveur DHCP afin d&rsquo;automatiser la configuration IP pour tous vos appareils (TV, consoles, smartphones&hellip;).</p>
<p>Cette solution peut s&rsquo;installer facilement, un raspberry pi fait très bien le taff. Ils proposent un script d&rsquo;installation, et&hellip; Vous vous en doutez peut être : une image Docker &#x1f604;</p>
<p>Le fichier <code>docker-compose.yml</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">adguard</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">docker.io/adguard/adguardhome</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">adguard</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">hostname</span>: <span style="color:#ae81ff">adguard</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">env_file</span>: <span style="color:#ae81ff">adguard.env</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/opt/adguard/work:/opt/adguardhome/work</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/opt/adguard/conf:/opt/adguardhome/conf</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">network_mode</span>: <span style="color:#ae81ff">host</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">always</span>
</span></span></code></pre></div><p>Et son fichier de configuration <code>adguard.env</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>TZ=Europe/Paris
</span></span></code></pre></div><p>Petite particularité par rapport à cette configuration : le mode réseau utilisé par Docker est en mode <em>host</em>. Cela signifie que l&rsquo;intégralité des ports sera ouverte sur l&rsquo;hôte, préférable pour s&rsquo;assurer du bon fonctionnement du serveur DHCP</p>
<p>Une fois votre image Docker déployée, vous pouvez accéder à l&rsquo;interface d&rsquo;administration directement à l&rsquo;adresse <code>http://&lt;IP&gt;:3000</code>.
La configuration étant intuitive, je vous laisse vous balader dans l&rsquo;application, dont l&rsquo;interface est très propre et complète.</p>

  <img src="/img/posts/filtrage-des-requetes-dns/adguardhome.webp"  class="center"  style="border-radius: 8px;"  />


<p>Il subsiste toutefois un problème avec ce genre de configuration : cela ne s&rsquo;applique qu&rsquo;à votre réseau local. Il reste la possibilité d&rsquo;utiliser un VPN pour passer par votre réseau domestique, mais cela alourdi pas mal les échanges réseau et donc le temps de réponse de vos requêtes.</p>
<p>Nous allons résoudre ce problème en parlant de l&rsquo;alternative de cet article : NextDNS</p>
<h2 id="nextdns">
  NextDNS
  <a href="#nextdns" class="h-anchor" aria-hidden="true">#</a>
</h2>

  <img src="/img/posts/filtrage-des-requetes-dns/nextdnssite.webp"  class="center"  style="border-radius: 8px;"  />


<p>NextDNS est à mon sens le meilleur compromis entre la personnalisation et la simplicité d&rsquo;utilisation. Ce service permet de profiter d&rsquo;un blocage de publicités quelque soit le réseau utilisé (Wifi, cellulaire). Ce service dispose d&rsquo;une version gratuite et payante, mais la version gratuite suffit déjà largement, la seule limitation étant celle de 300 000 requêtes par mois. Si jamais ce n&rsquo;est pas suffisant, il est possible de combiner NextDNS avec Adguard Home, en spécifiant à NextDNS de ne pas être actif sur des réseaux spécifiques.</p>
<p>Avant de créer un compte chez eux, il est possible de tester leur service une semaine. Un petit tour de leur interface :</p>

  <img src="/img/posts/filtrage-des-requetes-dns/confidentialite.webp"  class="center"  style="border-radius: 8px;"  />


<hr>

  <img src="/img/posts/filtrage-des-requetes-dns/securite.webp"  class="center"  style="border-radius: 8px;"  />


<hr>

  <img src="/img/posts/filtrage-des-requetes-dns/statistiques.webp"  class="center"  style="border-radius: 8px;"  />


<p>A noter que vous pouvez conserver l&rsquo;historique ou non des url appelées, choisir la rétention, et surtout, le lieu où sont conservées les logs (US, Europe, ou la Suisse)</p>
<p>Dans le 1er onglet, Installation, vous aurez toutes les méthodes disponibles pour mettre en place la solution, en installant un logiciel à eux ou en modifiant vos paramètre (Windows, Android, MacOS, iOS&hellip;)</p>
<p>Et pour finir, ils proposent un mode &ldquo;Ultra-Low Latency Network&rdquo;, qui améliorent pas mal les temps de réponse (meilleurs qu&rsquo;avec votre fournisseur d&rsquo;accès Internet).</p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Autres posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="https://www.jeremky.fr/posts/heberger-un-serveur-minecraft/">
                  <span class="button__icon">←</span>
                  <span class="button__text">Héberger un serveur Minecraft</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="https://www.jeremky.fr/posts/refonte-du-site/">
                  <span class="button__text">Refonte du site</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </article>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
          <div class="copyright">
        <span>© 2025 Propulsé par <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span>
      </div>
    
  </div>
</footer>





<script type="text/javascript" src="/bundle.min.js"></script>


      
    </div>

    
  </body>
</html>
