<!DOCTYPE html>
<html lang="fr">
  <head>
    
      <title>
        Personnaliser vos images Docker ::
        JeremKy.fr
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="Les tutos présents sur ce site pour l&rsquo;installation d&rsquo;applications via Docker utilisent des images disponibles directement sur Dockerhub. Les images étant fonctionnelles en l&rsquo;état, je n&rsquo;ai jamais eu besoin de construire moi-même une image.
L&rsquo;utilisation de VS Code m&rsquo;a poussé à regarder comment transformer l&rsquo;image créée par linuxserver.io pour y ajouter Hugo, sans avoir besoin de réinstaller l&rsquo;application à chaque redéploiement.
Dans cet article, je ne fais référence qu&rsquo;à Docker pour une question de lisibilité, mais cela est tout aussi valable pour Podman
"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://www.jeremky.fr/posts/personnaliser-vos-images-docker/" />







<link rel="stylesheet" href="/css/style.css" />

<link rel="stylesheet" href="https://www.jeremky.fr/style.css" />


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.jeremky.fr/img/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="https://www.jeremky.fr/img/favicon.png" />


<link href="/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Personnaliser vos images Docker">
  <meta name="twitter:description" content="Les tutos présents sur ce site pour l’installation d’applications via Docker utilisent des images disponibles directement sur Dockerhub. Les images étant fonctionnelles en l’état, je n’ai jamais eu besoin de construire moi-même une image.
L’utilisation de VS Code m’a poussé à regarder comment transformer l’image créée par linuxserver.io pour y ajouter Hugo, sans avoir besoin de réinstaller l’application à chaque redéploiement.
Dans cet article, je ne fais référence qu’à Docker pour une question de lisibilité, mais cela est tout aussi valable pour Podman">



<meta property="og:url" content="https://www.jeremky.fr/posts/personnaliser-vos-images-docker/">
  <meta property="og:site_name" content="JeremKy.fr">
  <meta property="og:title" content="Personnaliser vos images Docker">
  <meta property="og:description" content="Les tutos présents sur ce site pour l’installation d’applications via Docker utilisent des images disponibles directement sur Dockerhub. Les images étant fonctionnelles en l’état, je n’ai jamais eu besoin de construire moi-même une image.
L’utilisation de VS Code m’a poussé à regarder comment transformer l’image créée par linuxserver.io pour y ajouter Hugo, sans avoir besoin de réinstaller l’application à chaque redéploiement.
Dans cet article, je ne fais référence qu’à Docker pour une question de lisibilité, mais cela est tout aussi valable pour Podman">
  <meta property="og:locale" content="fr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-02T00:22:28+00:00">
    <meta property="article:modified_time" content="2024-11-02T00:22:28+00:00">
    <meta property="article:tag" content="Docker">
    <meta property="article:tag" content="Podman">






  </head>
  <body >
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/apropos">A propos</a></li>
        
      
        
          <li><a href="/archives">Archives</a></li>
        
      
        
          <li><a href="/categories/news">News</a></li>
        
      
        
          <li><a href="/categories/tutos">Tutos</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/apropos">A propos</a></li>
      
    
      
        <li><a href="/archives">Archives</a></li>
      
    
      
        <li><a href="/categories/news">News</a></li>
      
    
      
        <li><a href="/categories/tutos">Tutos</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <article class="post">
    <h1 class="post-title">Personnaliser vos images Docker</h1>
    <div class="post-meta">
      
        <time class="post-date">
          02/11/2024
        </time>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 2 min de lecture</span
        >
      
    </div>

    
      <span class="post-tags">
        
          <a href="https://www.jeremky.fr/tags/docker/">#docker</a>&nbsp;
        
          <a href="https://www.jeremky.fr/tags/podman/">#podman</a>&nbsp;
        
      </span>
    

    
      <figure class="post-cover">
  
    <img src="https://www.jeremky.fr/img/posts/personnaliser-vos-images-docker/cover.webp" alt="Personnaliser vos images Docker" width="700" />
  

  
</figure>

    

    <div class="post-content">
      
        
        <h2>Sommaire</h2>
        <aside class="table-of-contents"><nav id="TableOfContents">
  <ul>
    <li><a href="#fichier-dockerfile">Fichier Dockerfile</a></li>
    <li><a href="#déployer-avec-compose">Déployer avec Compose</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></aside>
        
      
      <p>Les tutos présents sur ce site pour l&rsquo;installation d&rsquo;applications via <a href="/posts/premiers-pas-avec-docker/">Docker</a> utilisent des images disponibles directement sur <a href="https://hub.docker.com/">Dockerhub</a>. Les images étant fonctionnelles en l&rsquo;état, je n&rsquo;ai jamais eu besoin de construire moi-même une image.</p>
<p>L&rsquo;utilisation de <a href="/posts/visual-studio-code-dans-son-navigateur/">VS Code</a> m&rsquo;a poussé à regarder comment transformer l&rsquo;image créée par <a href="https://hub.docker.com/r/linuxserver/code-server">linuxserver.io</a> pour y ajouter Hugo, sans avoir besoin de réinstaller l&rsquo;application à chaque redéploiement.</p>
<blockquote>
<p>Dans cet article, je ne fais référence qu&rsquo;à Docker pour une question de lisibilité, mais cela est tout aussi valable pour Podman</p></blockquote>
<h2 id="fichier-dockerfile">
  Fichier Dockerfile
  <a href="#fichier-dockerfile" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Pour créer une image personnalisée, vous devez spécifier les instructions dans un fichier nommé <code>Dockerfile</code>.</p>
<p>Je ne vais pas réinventer la roue sur ce coup, je vous laisse aller voir la documentation faite par <a href="https://openclassrooms.com/fr/courses/2035766-optimisez-votre-deploiement-en-creant-des-conteneurs-avec-docker/6211517-creez-votre-premier-dockerfile">OpenClassrooms</a> qui explique tout ça très bien.</p>
<p>Cette documentation vous présentera chaque instruction disponible que l&rsquo;on peut utiliser dans le fichier <code>Dockerfile</code>, ainsi que les commandes Docker pour la génération de l&rsquo;image une fois votre fichier prêt.</p>
<h2 id="déployer-avec-compose">
  Déployer avec Compose
  <a href="#d%c3%a9ployer-avec-compose" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Après avoir suivi leur documentation, vous devriez être en mesure de savoir comment construire une image avec les commandes Docker. Nous allons donc maintenant voir comment intégrer la construction directement dans un fichier <code>docker-compose.yml</code>, afin d&rsquo;automatiser l&rsquo;installation d&rsquo;un conteneur depuis une image modifiée. Vous n&rsquo;aurez donc plus à passer par les étapes de build avant le déploiement de votre application.</p>
<p>Comme exemple, je vais prendre le cas de l&rsquo;intégration de Hugo dans l&rsquo;image de VS Code. Voici le fichier <code>docker-compose.yml</code> modifié en conséquence :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">vscode</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>: <span style="color:#ae81ff">.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">context</span>: <span style="color:#ae81ff">.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">localhost/vscode-hugo:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">vscode</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">hostname</span>: <span style="color:#ae81ff">vscode</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">env_file</span>: <span style="color:#ae81ff">vscode.env</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">nginx_proxy</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/opt/vscode:/config</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/opt/code-server/workspace:/config/workspace</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">always</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nginx_proxy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">external</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>Et son fichier <code>Dockerfile</code> associé, à placer dans le même dossier :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>FROM lscr.io/linuxserver/code-server:latest
</span></span><span style="display:flex;"><span>RUN apt-get update &amp;&amp; apt-get install -y hugo
</span></span></code></pre></div><p>L&rsquo;image personnalisée sera alors automatiquement créée si elle n&rsquo;est pas trouvée dans Docker. A l&rsquo;inverse, Docker ne fera pas de build si l&rsquo;image portant le nom spécifié dans le fichier <code>docker-compose.yml</code> est déjà présent dans sa base d&rsquo;images.</p>
<p>Une fois votre application déployée, vous pourrez supprimer l&rsquo;image d&rsquo;origine, celle-ci ne sera pas automatiquement supprimée par le déploiement.</p>
<h2 id="conclusion">
  Conclusion
  <a href="#conclusion" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>J&rsquo;ai pris pas mal de temps avant de parler de cet aspect de Docker. Et encore, j&rsquo;ai vraiment survolé le sujet, et j&rsquo;ai surtout orienté cet article selon mes propres besoins. J&rsquo;ajouterai peut être certains éléments à l&rsquo;avenir si je suis de nouveau confronté à des besoins similaires.</p>
<p>Dans tous les cas, comme d&rsquo;habitude, n&rsquo;hésitez pas à <a href="mailto:contact@jeremky.fr">me contacter</a> si besoin !</p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Autres posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="https://www.jeremky.fr/posts/authelia-serveur-dauthentification-open-source/">
                  <span class="button__icon">←</span>
                  <span class="button__text">Authelia : serveur d&#39;authentification Open Source</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="https://www.jeremky.fr/posts/visual-studio-code-dans-son-navigateur/">
                  <span class="button__text">Visual Studio Code dans son navigateur</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </article>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
          <div class="copyright">
        <span>© 2025 Propulsé par <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span>
      </div>
    
  </div>
</footer>





<script type="text/javascript" src="/bundle.min.js"></script>


      
    </div>

    
  </body>
</html>
