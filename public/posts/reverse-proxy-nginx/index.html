<!DOCTYPE html>
<html lang="fr">
  <head>
    
      <title>
        Reverse Proxy NGINX ::
        JeremKy.fr
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="Sur Wikipedia, il est dit qu&rsquo;un proxy inverse (reverse proxy) ou serveur mandataire inverse est un type de serveur, habituellement placé en frontal de serveurs web. Contrairement au serveur proxy qui permet à un utilisateur d&rsquo;accéder au réseau Internet, le proxy inverse permet à un utilisateur d&rsquo;Internet d&rsquo;accéder à des serveurs internes.
L&rsquo;intérêt dans notre cas, est de pouvoir disposer de différentes applications Web conteneurisées, et de n&rsquo;avoir qu&rsquo;un seul accès Web en front. De plus, la mise en place d&rsquo;un reverse proxy offre également ces avantages :
"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://www.jeremky.fr/posts/reverse-proxy-nginx/" />







<link rel="stylesheet" href="/css/style.css" />

<link rel="stylesheet" href="https://www.jeremky.fr/style.css" />


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.jeremky.fr/img/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="https://www.jeremky.fr/img/favicon.png" />


<link href="/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Reverse Proxy NGINX">
  <meta name="twitter:description" content="Sur Wikipedia, il est dit qu’un proxy inverse (reverse proxy) ou serveur mandataire inverse est un type de serveur, habituellement placé en frontal de serveurs web. Contrairement au serveur proxy qui permet à un utilisateur d’accéder au réseau Internet, le proxy inverse permet à un utilisateur d’Internet d’accéder à des serveurs internes.
L’intérêt dans notre cas, est de pouvoir disposer de différentes applications Web conteneurisées, et de n’avoir qu’un seul accès Web en front. De plus, la mise en place d’un reverse proxy offre également ces avantages :">



<meta property="og:url" content="https://www.jeremky.fr/posts/reverse-proxy-nginx/">
  <meta property="og:site_name" content="JeremKy.fr">
  <meta property="og:title" content="Reverse Proxy NGINX">
  <meta property="og:description" content="Sur Wikipedia, il est dit qu’un proxy inverse (reverse proxy) ou serveur mandataire inverse est un type de serveur, habituellement placé en frontal de serveurs web. Contrairement au serveur proxy qui permet à un utilisateur d’accéder au réseau Internet, le proxy inverse permet à un utilisateur d’Internet d’accéder à des serveurs internes.
L’intérêt dans notre cas, est de pouvoir disposer de différentes applications Web conteneurisées, et de n’avoir qu’un seul accès Web en front. De plus, la mise en place d’un reverse proxy offre également ces avantages :">
  <meta property="og:locale" content="fr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-04T17:06:51+00:00">
    <meta property="article:modified_time" content="2023-09-04T17:06:51+00:00">
    <meta property="article:tag" content="Reseau">
    <meta property="article:tag" content="Docker">
    <meta property="article:tag" content="Podman">






  </head>
  <body >
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/apropos">A propos</a></li>
        
      
        
          <li><a href="/archives">Archives</a></li>
        
      
        
          <li><a href="/categories/news">News</a></li>
        
      
        
          <li><a href="/categories/tutos">Tutos</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/apropos">A propos</a></li>
      
    
      
        <li><a href="/archives">Archives</a></li>
      
    
      
        <li><a href="/categories/news">News</a></li>
      
    
      
        <li><a href="/categories/tutos">Tutos</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <article class="post">
    <h1 class="post-title">Reverse Proxy NGINX</h1>
    <div class="post-meta">
      
        <time class="post-date">
          04/09/2023
        </time>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 5 min de lecture</span
        >
      
    </div>

    
      <span class="post-tags">
        
          <a href="https://www.jeremky.fr/tags/reseau/">#reseau</a>&nbsp;
        
          <a href="https://www.jeremky.fr/tags/docker/">#docker</a>&nbsp;
        
          <a href="https://www.jeremky.fr/tags/podman/">#podman</a>&nbsp;
        
      </span>
    

    
      <figure class="post-cover">
  
    <img src="https://www.jeremky.fr/img/posts/reverse-proxy-nginx/cover.webp" alt="Reverse Proxy NGINX" width="700" />
  

  
</figure>

    

    <div class="post-content">
      
        
        <h2>Sommaire</h2>
        <aside class="table-of-contents"><nav id="TableOfContents">
  <ul>
    <li><a href="#déploiement-du-reverse-proxy-nginx">Déploiement du reverse proxy NGINX</a></li>
    <li><a href="#configuration-de-vos-conteneurs">Configuration de vos conteneurs</a></li>
    <li><a href="#ajout-dune-configuration-nginx">Ajout d&rsquo;une configuration NGINX</a></li>
    <li><a href="#particularité-avec-podman">Particularité avec Podman</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></aside>
        
      
      <p>Sur <a href="https://fr.wikipedia.org/wiki/Proxy_inverse">Wikipedia</a>, il est dit qu&rsquo;<em>un proxy inverse (reverse proxy) ou serveur mandataire inverse est un type de serveur, habituellement placé en frontal de serveurs web. Contrairement au serveur proxy qui permet à un utilisateur d&rsquo;accéder au réseau Internet, le proxy inverse permet à un utilisateur d&rsquo;Internet d&rsquo;accéder à des serveurs internes.</em></p>
<p>L&rsquo;intérêt dans notre cas, est de pouvoir disposer de différentes applications Web conteneurisées, et de n&rsquo;avoir qu&rsquo;un seul accès Web en front. De plus, la mise en place d&rsquo;un reverse proxy offre également ces avantages :</p>
<ul>
<li>Permettre l&rsquo;accès aux applications via des sous domaines, plutôt que par un port spécifique</li>
<li>Forcer l&rsquo;accès aux applications en SSL, même si les applications ne le prennent pas en charge</li>
<li>Mettre en place un réseau virtuel : seul le proxy aura accès aux applications</li>
</ul>
<h2 id="déploiement-du-reverse-proxy-nginx">
  Déploiement du reverse proxy NGINX
  <a href="#d%c3%a9ploiement-du-reverse-proxy-nginx" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>La team <a href="https://docs.linuxserver.io/general/swag">Linuxserver</a> fournit une image appelée SWAG (pour <em>Secure Web Application Gateway</em>). Par rapport à une image NGINX classique, les avantages sont les suivants :</p>
<ul>
<li>Création automatisée des certificats SSL via Let&rsquo;s Encrypt</li>
<li>Intégration de PHP</li>
<li>Activation de l&rsquo;outil Fail2ban (pour bannir temporairement les IP abusant des requêtes http)</li>
<li>Mise à disposition de fichiers sample pour tout un tas d&rsquo;applications</li>
</ul>
<p>Voici le contenu de mon fichier <code>docker-compose.yml</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nginx</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">lscr.io/linuxserver/swag:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">hostname</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">env_file</span>: <span style="color:#ae81ff">nginx.env</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">cap_add</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">NET_ADMIN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">proxy</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/opt/nginx:/config</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">80</span>:<span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">443</span>:<span style="color:#ae81ff">443</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">always</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">proxy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">external</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>Et le fichier <code>nginx.env</code> pour les variables :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>PUID=1000
</span></span><span style="display:flex;"><span>PGID=1000
</span></span><span style="display:flex;"><span>TZ=Europe/Paris
</span></span><span style="display:flex;"><span>URL=mondomaine.fr
</span></span><span style="display:flex;"><span>SUBDOMAINS=www,nextcloud
</span></span><span style="display:flex;"><span>VALIDATION=http
</span></span><span style="display:flex;"><span>EMAIL=foo@bar.com
</span></span><span style="display:flex;"><span>ONLY_SUBDOMAINS=false
</span></span></code></pre></div><blockquote>
<p>IMPORTANT : si vous avez d&rsquo;autres sous domaines à ajouter par la suite, il faudra supprimer et réinstaller le conteneur. La variable ne sera pas mise à jour dans le cas contraire.</p></blockquote>
<p>Vous pouvez maintenant tester votre serveur web. En contactant l&rsquo;IP ou votre domaine, vous devriez tomber sur la page par défaut :</p>

  <img src="/img/posts/reverse-proxy-nginx/default.webp"  class="center"  style="border-radius: 8px;"  />


<h2 id="configuration-de-vos-conteneurs">
  Configuration de vos conteneurs
  <a href="#configuration-de-vos-conteneurs" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Votre proxy étant en place, vous devez maintenant modifier vos conteneurs pour qu&rsquo;ils se trouvent dans le même réseau virtuel. Nous allons reprendre l&rsquo;exemple de Nextcloud présent dans l&rsquo;article au sujet de <a href="/posts/utilisation-de-docker-compose/">Docker Compose</a>. Le fichier <code>docker-compose.yml</code> est désormais le suivant :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nextcloud-db</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">docker.io/postgres:16.4</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">nextcloud-db</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">hostname</span>: <span style="color:#ae81ff">nextcloud-db</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">env_file</span>: <span style="color:#ae81ff">nextcloud-db.env</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/opt/nextcloud/postgres:/var/lib/postgresql/data</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">always</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nextcloud</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">lscr.io/linuxserver/nextcloud:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">nextcloud</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">hostname</span>: <span style="color:#ae81ff">nextcloud</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">nginx_proxy</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">env_file</span>: <span style="color:#ae81ff">nextcloud.env</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/opt/nextcloud/config:/config</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">/opt/nextcloud/data:/data</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">nextcloud-db</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restart</span>: <span style="color:#ae81ff">always</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">networks</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">default</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">external</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">nginx_proxy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">external</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>A la fin du fichier, on lui spécifie quels réseaux seront à créer. Dans notre cas, il ne doit créer que &ldquo;default&rdquo; (qui s&rsquo;appellera en réalité <code>nextcloud_default</code>), mais doit avoir accès au réseau <code>nginx_proxy</code> (external à <em>true</em>).
Ensuite, pour chaque service, on lui spécifie quel(s) réseau(x) utiliser. La base de donnée n&rsquo;est que dans le réseau network, et la partie web dans les 2. Le reverse proxy aura donc accès à l&rsquo;application Web mais pas à la base.</p>
<blockquote>
<p>Vous remarquerez que les ports ne sont plus spécifiés pour le service nextcloud. Il n&rsquo;est en effet plus nécessaire d&rsquo;ouvrir l&rsquo;accès : celui-ci se fera uniquement par le proxy.</p></blockquote>
<h2 id="ajout-dune-configuration-nginx">
  Ajout d&rsquo;une configuration NGINX
  <a href="#ajout-dune-configuration-nginx" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Maintenant que vous avez redéployé votre application dans le bon réseau (nginx_proxy), il ne reste plus qu&rsquo;à définir une configuration dans NGINX pour pointer vers celle-ci. Si vous avez laissé le dossier de déploiement par défaut, tout doit se trouver dans <code>/opt/nginx</code>.</p>
<p>Dans ce dossier, vous pouvez vous rendre dans <code>nginx/proxy-confs</code>. Ici se trouve tout un tas de fichier &ldquo;sample&rdquo; proposés par Linuxserver, certaines applications ayant des spécificités de configuration.
Vous y trouverez un fichier <code>nextcloud.subdomain.conf.sample</code>. Copiez-le en <code>nextcloud.subdomain.conf</code>. Le contenu de ce fichier :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>## Version 2023/06/24
</span></span><span style="display:flex;"><span># make sure that your nextcloud container is named nextcloud
</span></span><span style="display:flex;"><span># make sure that your dns has a cname set for nextcloud
</span></span><span style="display:flex;"><span># assuming this container is called &#34;swag&#34;, edit your nextcloud container&#39;s config
</span></span><span style="display:flex;"><span># located at /config/www/nextcloud/config/config.php and add the following lines before the &#34;);&#34;:
</span></span><span style="display:flex;"><span>#  &#39;trusted_proxies&#39; =&gt; [&#39;swag&#39;],
</span></span><span style="display:flex;"><span>#  &#39;overwrite.cli.url&#39; =&gt; &#39;https://nextcloud.example.com/&#39;,
</span></span><span style="display:flex;"><span>#  &#39;overwritehost&#39; =&gt; &#39;nextcloud.example.com&#39;,
</span></span><span style="display:flex;"><span>#  &#39;overwriteprotocol&#39; =&gt; &#39;https&#39;,
</span></span><span style="display:flex;"><span>#
</span></span><span style="display:flex;"><span># Also don&#39;t forget to add your domain name to the trusted domains array. It should look somewhat like this:
</span></span><span style="display:flex;"><span>#  array (
</span></span><span style="display:flex;"><span>#    0 =&gt; &#39;192.168.0.1:444&#39;, # This line may look different on your setup, don&#39;t modify it.
</span></span><span style="display:flex;"><span>#    1 =&gt; &#39;nextcloud.example.com&#39;,
</span></span><span style="display:flex;"><span>#  ),
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>server {
</span></span><span style="display:flex;"><span>    listen 443 ssl http2;
</span></span><span style="display:flex;"><span>    listen [::]:443 ssl http2;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    server_name nextcloud.*;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    include /config/nginx/ssl.conf;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    client_max_body_size 0;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    location / {
</span></span><span style="display:flex;"><span>        include /config/nginx/proxy.conf;
</span></span><span style="display:flex;"><span>        include /config/nginx/resolver.conf;
</span></span><span style="display:flex;"><span>        set $upstream_app nextcloud;
</span></span><span style="display:flex;"><span>        set $upstream_port 443;
</span></span><span style="display:flex;"><span>        set $upstream_proto https;
</span></span><span style="display:flex;"><span>        proxy_pass $upstream_proto://$upstream_app:$upstream_port;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        # Hide proxy response headers from Nextcloud that conflict with ssl.conf
</span></span><span style="display:flex;"><span>        # Uncomment the Optional additional headers in SWAG&#39;s ssl.conf to pass Nextcloud&#39;s security scan
</span></span><span style="display:flex;"><span>        proxy_hide_header Referrer-Policy;
</span></span><span style="display:flex;"><span>        proxy_hide_header X-Content-Type-Options;
</span></span><span style="display:flex;"><span>        proxy_hide_header X-Frame-Options;
</span></span><span style="display:flex;"><span>        proxy_hide_header X-XSS-Protection;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        # Disable proxy buffering
</span></span><span style="display:flex;"><span>        proxy_buffering off;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Si votre conteneur pour la partie web s&rsquo;appelle &ldquo;nextcloud&rdquo;, et que votre sous domaine également, vous n&rsquo;avez rien de plus à faire, juste à redémarrer le conteneur nginx :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo docker restart nginx
</span></span></code></pre></div><p>Votre application devrait maintenant être accessible !</p>
<h2 id="particularité-avec-podman">
  Particularité avec Podman
  <a href="#particularit%c3%a9-avec-podman" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Si vous utilisez Podman à la place de Docker, une modification est à effectuer dans la configuration de l&rsquo;image pour éviter d&rsquo;avoir aléatoirement des erreurs 502.</p>
<p>Après avoir déployé votre conteneur nginx, rendez-vous dans <code>/opt/nginx/nginx</code> et modifiez le fichier <code>resolver.conf</code>, pour y supprimer la 2ème adresse IP au niveau de la ligne <code>resolver</code>. Le fichier doit ressembler à ceci :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span># This file is auto-generated only on first start, based on the container&#39;s /etc/resolv.conf file.   Feel free to modify it as you wish.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>resolver  10.89.0.1 valid=30s;
</span></span></code></pre></div><h2 id="conclusion">
  Conclusion
  <a href="#conclusion" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>L&rsquo;utilisation de sous domaines via un reverse proxy rend l&rsquo;utilisation de vos différentes applications plus confortables. Cela évite d&rsquo;avoir des ports différents à saisir dans vos url. Et l&rsquo;image de linuxserver facilite grandement la génération de certificats valides.</p>
<p>N&rsquo;hésitez pas à me demander par <a href="mailto:contact@jeremky/fr">e-mail</a> des détails si nécessaire pour la configuration d&rsquo;applications ne figurant pas dans les fichiers sample fournis.</p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Autres posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="https://www.jeremky.fr/posts/utilisation-de-transfer.sh/">
                  <span class="button__icon">←</span>
                  <span class="button__text">Utilisation de transfer.sh</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="https://www.jeremky.fr/posts/monter-un-serveur-teeworlds/">
                  <span class="button__text">Monter un serveur Teeworlds</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </article>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
          <div class="copyright">
        <span>© 2025 Propulsé par <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span>
      </div>
    
  </div>
</footer>





<script type="text/javascript" src="/bundle.min.js"></script>


      
    </div>

    
  </body>
</html>
