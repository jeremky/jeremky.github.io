<!DOCTYPE html>
<html lang="fr">
  <head>
    
      <title>
        Sécurisation de vos connexions SSH ::
        JeremKy.fr
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="Dans cet article, nous allons voir comment sécuriser vos connexion SSH, en vous proposant de mettre en place un échange de clés, bien plus sécurisé qu&rsquo;une simple authentification par mot de passe. Nous allons également mettre en place un fichier de configuration permettant l&rsquo;utilisation de plusieurs clés.
SSH c&rsquo;est quoi ? # SSH, ou Secure Socket Shell, est un protocole réseau qui permet aux administrateurs d&rsquo;accéder à distance à un ordinateur, en toute sécurité. SSH désigne également l&rsquo;ensemble des utilitaires qui mettent en oeuvre le protocole. Le protocole Secure Shell assure une authentification forte et des communications de données chiffrées sécurisées entre deux ordinateurs connectés sur un réseau peu sûr, tel qu&rsquo;Internet. SSH est largement utilisé par les administrateurs réseau pour gérer à distance les systèmes et les applications, car il leur permet de se connecter à un autre ordinateur sur un réseau, d&rsquo;exécuter des commandes et de déplacer des fichiers d&rsquo;un ordinateur à un autre.
"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://www.jeremky.fr/posts/securisation-de-vos-connexions-ssh/" />







<link rel="stylesheet" href="/css/style.css" />

<link rel="stylesheet" href="https://www.jeremky.fr/style.css" />


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.jeremky.fr/img/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="https://www.jeremky.fr/img/favicon.png" />


<link href="/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Sécurisation de vos connexions SSH">
  <meta name="twitter:description" content="Dans cet article, nous allons voir comment sécuriser vos connexion SSH, en vous proposant de mettre en place un échange de clés, bien plus sécurisé qu’une simple authentification par mot de passe. Nous allons également mettre en place un fichier de configuration permettant l’utilisation de plusieurs clés.
SSH c’est quoi ? # SSH, ou Secure Socket Shell, est un protocole réseau qui permet aux administrateurs d’accéder à distance à un ordinateur, en toute sécurité. SSH désigne également l’ensemble des utilitaires qui mettent en oeuvre le protocole. Le protocole Secure Shell assure une authentification forte et des communications de données chiffrées sécurisées entre deux ordinateurs connectés sur un réseau peu sûr, tel qu’Internet. SSH est largement utilisé par les administrateurs réseau pour gérer à distance les systèmes et les applications, car il leur permet de se connecter à un autre ordinateur sur un réseau, d’exécuter des commandes et de déplacer des fichiers d’un ordinateur à un autre.">



<meta property="og:url" content="https://www.jeremky.fr/posts/securisation-de-vos-connexions-ssh/">
  <meta property="og:site_name" content="JeremKy.fr">
  <meta property="og:title" content="Sécurisation de vos connexions SSH">
  <meta property="og:description" content="Dans cet article, nous allons voir comment sécuriser vos connexion SSH, en vous proposant de mettre en place un échange de clés, bien plus sécurisé qu’une simple authentification par mot de passe. Nous allons également mettre en place un fichier de configuration permettant l’utilisation de plusieurs clés.
SSH c’est quoi ? # SSH, ou Secure Socket Shell, est un protocole réseau qui permet aux administrateurs d’accéder à distance à un ordinateur, en toute sécurité. SSH désigne également l’ensemble des utilitaires qui mettent en oeuvre le protocole. Le protocole Secure Shell assure une authentification forte et des communications de données chiffrées sécurisées entre deux ordinateurs connectés sur un réseau peu sûr, tel qu’Internet. SSH est largement utilisé par les administrateurs réseau pour gérer à distance les systèmes et les applications, car il leur permet de se connecter à un autre ordinateur sur un réseau, d’exécuter des commandes et de déplacer des fichiers d’un ordinateur à un autre.">
  <meta property="og:locale" content="fr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-19T17:16:47+00:00">
    <meta property="article:modified_time" content="2024-05-19T17:16:47+00:00">
    <meta property="article:tag" content="Linux">






  </head>
  <body >
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/apropos">A propos</a></li>
        
      
        
          <li><a href="/archives">Archives</a></li>
        
      
        
          <li><a href="/categories/news">News</a></li>
        
      
        
          <li><a href="/categories/tutos">Tutos</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/apropos">A propos</a></li>
      
    
      
        <li><a href="/archives">Archives</a></li>
      
    
      
        <li><a href="/categories/news">News</a></li>
      
    
      
        <li><a href="/categories/tutos">Tutos</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <article class="post">
    <h1 class="post-title">Sécurisation de vos connexions SSH</h1>
    <div class="post-meta">
      
        <time class="post-date">
          19/05/2024
        </time>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 4 min de lecture</span
        >
      
    </div>

    
      <span class="post-tags">
        
          <a href="https://www.jeremky.fr/tags/linux/">#linux</a>&nbsp;
        
      </span>
    

    
      <figure class="post-cover">
  
    <img src="https://www.jeremky.fr/img/posts/securisation-de-vos-connexions-ssh/cover.webp" alt="Sécurisation de vos connexions SSH" width="700" />
  

  
</figure>

    

    <div class="post-content">
      
        
        <h2>Sommaire</h2>
        <aside class="table-of-contents"><nav id="TableOfContents">
  <ul>
    <li><a href="#ssh-cest-quoi-">SSH c&rsquo;est quoi ?</a></li>
    <li><a href="#création-dune-clé">Création d&rsquo;une clé</a></li>
    <li><a href="#utiliser-plusieurs-clés">Utiliser plusieurs clés</a></li>
    <li><a href="#côté-serveur-ssh">Côté serveur SSH</a></li>
  </ul>
</nav></aside>
        
      
      <p>Dans cet article, nous allons voir comment sécuriser vos connexion SSH, en vous proposant de mettre en place un échange de clés, bien plus sécurisé qu&rsquo;une simple authentification par mot de passe. Nous allons également mettre en place un fichier de configuration permettant l&rsquo;utilisation de plusieurs clés.</p>
<h2 id="ssh-cest-quoi-">
  SSH c&rsquo;est quoi ?
  <a href="#ssh-cest-quoi-" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p><em>SSH, ou Secure Socket Shell, est un protocole réseau qui permet aux administrateurs d&rsquo;accéder à distance à un ordinateur, en toute sécurité. SSH désigne également l&rsquo;ensemble des utilitaires qui mettent en oeuvre le protocole. Le protocole Secure Shell assure une authentification forte et des communications de données chiffrées sécurisées entre deux ordinateurs connectés sur un réseau peu sûr, tel qu&rsquo;Internet. SSH est largement utilisé par les administrateurs réseau pour gérer à distance les systèmes et les applications, car il leur permet de se connecter à un autre ordinateur sur un réseau, d&rsquo;exécuter des commandes et de déplacer des fichiers d&rsquo;un ordinateur à un autre.</em></p>
<h2 id="création-dune-clé">
  Création d&rsquo;une clé
  <a href="#cr%c3%a9ation-dune-cl%c3%a9" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>A noter que ce que je vais indiquer ici est valable aussi bien pour un client sous Linux, Mac, ou Windows (10 et 11).</p>
<p>Il existe différents algorithmes pour créer des clés. Le plus connu, le RSA. Toutefois, je vais vous proposer un algorithme plus récent, et surtout offrant un meilleur niveau de sécurité, le ed25519.</p>
<p><em>&ldquo;Ed25519 a pour but de fournir une résistance aux attaques comparable à celle des chiffrements de 128-bits de qualité. Les clés publiques sont encodées sur 256 bits (32 octets) de long et les signatures sont deux fois plus longues.&rdquo;</em></p>
<p>Pour créer votre paire de clé de type ed25519, voici la commande à utiliser :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh-keygen -t ed25519 -a <span style="color:#ae81ff">100</span>
</span></span></code></pre></div><p>Quelques questions vous seront posées :</p>
<ul>
<li>L&rsquo;emplacement où générer les clés (vous pouvez laisser par défaut)</li>
<li>Une passphrase à saisir (non obligatoire, mais recommandé)</li>
</ul>

  <img src="/img/posts/securisation-de-vos-connexions-ssh/gensshkey.webp"  class="center"  style="border-radius: 8px;"  />


<p>Une fois votre clé générée, nous allons utiliser la commande suivante pour l&rsquo;ajouter au serveur que l&rsquo;on souhaite :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh-copy-id -i .ssh/id_ed25519.pub &lt;user&gt;@&lt;serveur&gt;
</span></span></code></pre></div><p>Il vous faut spécifier la clé publique a utiliser, ainsi que le serveur de destination. Le mot de passe de connexion à ce dernier vous sera demandé.</p>

  <img src="/img/posts/securisation-de-vos-connexions-ssh/copykey.webp"  class="center"  style="border-radius: 8px;"  />


<p>Une fois cela fait, vous pouvez retenter une connexion et profiter du résultat &#x1f60e;</p>
<h2 id="utiliser-plusieurs-clés">
  Utiliser plusieurs clés
  <a href="#utiliser-plusieurs-cl%c3%a9s" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Afin d&rsquo;augmenter davantage la sécurité, il est possible d&rsquo;utiliser une clé par serveur SSH. Le plus simple, c&rsquo;est de vous créer un fichier de config dédié. Ce fichier vous permettra même de vous créer des alias pour vos connexions distantes.</p>
<p>Le fichier, appelé <code>config</code>, est à créer sous dans votre dossier utilisateur, sous <code>.ssh</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>Host *
</span></span><span style="display:flex;"><span>    AddKeysToAgent yes
</span></span><span style="display:flex;"><span>    IdentitiesOnly yes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Host recalbox
</span></span><span style="display:flex;"><span>    HostName recalbox.local
</span></span><span style="display:flex;"><span>    User root
</span></span><span style="display:flex;"><span>    Port 22
</span></span><span style="display:flex;"><span>    IdentityFile ~/.ssh/id_recalbox
</span></span></code></pre></div><p>La 1ère partie s&rsquo;applique à tous les hosts. Les éléments sont les suivants :</p>
<ul>
<li><code>AddKeysToAgent</code> : ajoute le passphrase dans le trousseau du système, pour ne pas avoir à la ressaisir à chaque connexion</li>
<li><code>IdentitiesOnly</code> : spécifie à ssh de n&rsquo;utiliser que les clés présentes dans ce fichier de config</li>
</ul>
<p>Ensuite, vous pouvez créer un bloc par serveur distant, et y indiquer les éléments suivants :</p>
<ul>
<li>Le host : qui sera un alias pour vos connexions (la commande ssh recalbox suffira)</li>
<li>Le hostname, qui peut être une IP</li>
<li>Le user</li>
<li>Le port à utiliser</li>
<li>Et enfin la clé, qui a été renommée</li>
</ul>
<p>Désormais, au lieu de devoir saisir ssh <code>&lt;user&gt;@&lt;machine&gt;</code>, vous pouvez maintenant saisir simplement <code>ssh &lt;host&gt;</code></p>
<p>Les utilisateurs de Windows doivent activer le service <code>ssh-agent</code> pour permettre le stockage des passphrases :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>Get-Service ssh-agent | Set-Service -StartupType Automatic -PassThru | Start-Service
</span></span></code></pre></div><h2 id="côté-serveur-ssh">
  Côté serveur SSH
  <a href="#c%c3%b4t%c3%a9-serveur-ssh" class="h-anchor" aria-hidden="true">#</a>
</h2>
<p>Maintenant que vous avez mis en place votre système de clé, il est possible de configurer le serveur SSH afin de n&rsquo;accepter que les connexions via clé. Pour cela, il vous suffit d&rsquo;éditer sur votre serveur le fichier <code>/etc/ssh/sshd_config</code> pour y décommenter la ligne suivante :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>#PasswordAuthentication no
</span></span></code></pre></div><p>Dans le cas où vous avez utilisé mon script de configuration de debian, cette ligne se trouve dans le dernier bloc du fichier. Il suffit de changer la valeur à <code>no</code>.</p>
<p>Une fois la modification effectuée, une petite relance du service :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl restart sshd
</span></span></code></pre></div><p>Et avant de fermer votre session, ouvrez en une autre afin de vous assurer que vous pouvez toujours vous connecter&hellip; Cela vous évitera certaines mésaventures que j&rsquo;ai pu expérimenter &#x1f605;</p>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Autres posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="https://www.jeremky.fr/posts/la-fin-demulatorjs/">
                  <span class="button__icon">←</span>
                  <span class="button__text">La fin d&#39;EmulatorJS</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="https://www.jeremky.fr/posts/script-de-configuration-pour-debian/">
                  <span class="button__text">Script de configuration pour Debian</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </article>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >JEREMKY.FR</span
    >
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
          <div class="copyright">
        <span>© 2025 Propulsé par <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></span>
      </div>
    
  </div>
</footer>





<script type="text/javascript" src="/bundle.min.js"></script>


      
    </div>

    
  </body>
</html>
